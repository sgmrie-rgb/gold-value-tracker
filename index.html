<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gold Worth Tracker</title>
</head>
<body style="font-family:sans-serif;text-align:center;padding:20px;">
  <h1>ðŸ’° Gold Worth Tracker</h1>
  <p id="usd"></p>
  <p id="egp"></p>
  <button onclick="fetchPrices()">Refresh Prices</button>

<script>
const goldItems = [
  { weight: 5, karat: 24 },
  { weight: 5, karat: 24 },
  { weight: 1, karat: 24 },
  { weight: 1, karat: 24 },
  { weight: 4, karat: 21 },
  { weight: 7.61, karat: 18 },
  { weight: 1.8, karat: 18 }
];

async function fetchPrices() {
  document.getElementById('usd').innerText = 'Loading...';
  try {
    // New working gold API (per ounce in USD)
    const goldRes = await fetch('https://data-asg.goldprice.org/dbXRates/USD');
    const goldData = await goldRes.json();
    const goldUSDPerOunce = goldData.items[0].xauPrice;
    const goldUSDPerGram = goldUSDPerOunce / 31.1035;

    // Working currency API
    const forexRes = await fetch('https://open.er-api.com/v6/latest/USD');
    const forexData = await forexRes.json();
    const usdToEGP = forexData.rates.EGP;

    const totalUSD = goldItems.reduce(
      (sum, i) => sum + i.weight * goldUSDPerGram * (i.karat / 24),
      0
    );
    const totalEGP = totalUSD * usdToEGP;

    document.getElementById('usd').innerText = `Total: $${totalUSD.toFixed(2)} USD`;
    document.getElementById('egp').innerText = `â‰ˆ ${totalEGP.toFixed(2)} EGP`;
  } catch (err) {
    document.getElementById('usd').innerText = 'Error fetching data ðŸ˜ž';
    console.error(err);
  }
}

fetchPrices();
</script>

</body>
</html>
